<!DOCTYPE html>
<html>

<head>
    <title>CineVerse</title>
    <meta charset="utf-8">
    
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <link
        href="https://fonts.googleapis.com/css2?family=Roboto:wght@100;300;400;500;700;900&family=Sen:wght@400;700;800&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css">
    <link rel="stylesheet" type="text/css" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Luckiest+Guy&family=Pacifico&display=swap" rel="stylesheet">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans:wght@400;800&display=swap" rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    
</head>


<body>

    <!-- Phase 3 changes -->
    
<h1>saksgasdyg/<h1>
    <div class="navbar ">
        <div class="navbar-container">
            <div class="logo-container">
                <h1 class="logo">CineVerse</h1>
            </div>
            <div class="menu-container">
                <ul class="menu-list">
                    <li class="menu-list-item active">Home</li>
                    <li class="menu-list-item">Movies</li>
                    <li class="menu-list-item">Series</li>
                    <li class="menu-list-item">Popular</li>
                    <li class="menu-list-item">Trends</li>

                </ul>
            </div>
            <!-- Group-49-->
            <div class="profile-container">
                <img class="profile-picture" src="https://img.freepik.com/premium-vector/hand-drawing-cartoon-girl-cute-girl-drawing-profile-picture_488586-692.jpg?w=2000" alt="Profile Picture">
                <div class="profile-text-container">
                    <a href="{{ url_for('movie') }}" style="color:white; font-size: 18px; text-decoration:none;">
                        <span class="profile-text">Profile</span>
                    </a>
                    <div class="dropdown">
                        <i class="fas fa-caret-down"></i>
                        <div class="dropdown-content">
                            <a href="{{ url_for('account') }}" style="color:white; font-size: 15px; text-decoration:none;">Account</a>
                            <a href="{{ url_for('logout') }}" style="color:white; font-size: 15px; text-decoration:none;">Logout</a>
                        </div>
                    </div>
                </div>
            </div>
            
            <Style>
                .profile-container {
                    position: relative;
                    display: flex;
                    align-items: center;
                }
                
                .profile-picture {
                    width: 50px; /* Adjust size as needed */
                    height: 50px;
                    border-radius: 50%;
                    margin-right: 10px;
                }
                
                .profile-text-container {
                    position: relative;
                }
                
                .dropdown {
                    display: inline-block;
                    position: relative;
                    margin-left: 8px;
                }
                
                .dropdown-content {
                    display: none;
                    position: absolute;
                    right: 0;
                    background-color: #333;
                    min-width: 160px;
                    box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
                    z-index: 10;
                    border-radius: 4px;
                }
                
                .dropdown-content a {
                    color: white;
                    padding: 12px 16px;
                    text-decoration: none;
                    display: block;
                }
                
                .dropdown-content a:hover {
                    background-color: #575757;
                }
                
                .dropdown:hover .dropdown-content {
                    display: block;
                }
                
                .fas.fa-caret-down {
                    cursor: pointer;
                }
                
            </style>
            <script>
                // Add this script at the bottom of your HTML or in a separate JS file
document.addEventListener('DOMContentLoaded', () => {
    const dropdownToggle = document.querySelector('.fas.fa-caret-down');
    const dropdownContent = document.querySelector('.dropdown-content');
    
    // Toggle dropdown visibility on click
    dropdownToggle.addEventListener('click', () => {
        const isDisplayed = dropdownContent.style.display === 'block';
        dropdownContent.style.display = isDisplayed ? 'none' : 'block';
    });
    
    // Optional: Hide dropdown if clicked outside
    window.addEventListener('click', (event) => {
        if (!event.target.closest('.profile-text-container')) {
            dropdownContent.style.display = 'none';
        }
    });
});

            </script>
            <!-- Group-49-->
        </div>
    </div>
    <div class="sidebar">
        <i class="left-menu-icon fas fa-search"></i>
        <i class="left-menu-icon fas fa-home"></i>
        <i class="left-menu-icon fas fa-users"></i>
        <i class="left-menu-icon fas fa-bookmark"></i>
        <i class="left-menu-icon fas fa-tv"></i>
        <i class="left-menu-icon fas fa-hourglass-start"></i>
        <i class="left-menu-icon fas fa-shopping-cart"></i>
    </div>

    




    <!-- <div class="container"> -->
        <a href="/">
    <div id="errorMessage" class="error-card">
        <div class="error-content">
            <h3>Error!</h3>
            <p id="errorMessageText"></p>
        </div>
    </div>
</a>


<!-- </div> -->
    <!-- <div id="main"> -->
    <!-- <nav class="navbar navbar-inverse" style="background-color: rgba(0, 0, 0, 0.5);">
        <div class="container justify-content-center">
            <div class="navbar-header text-center" style="text-align:center;">
                <h1 style="color:#d9534f; font-size: 30px !important; font-weight: 800; margin-left:400px;" class="navbar-brand" href="#">MOVIE RECOMMENDATIONS</h1>
            </div>
        </div>
    </nav> -->

    <div class="container-fluid">
        <div class="content-container">
            <div class="featured-content"
                style="background: linear-gradient(to bottom, rgba(0,0,0,0), #151515), url('https://imagedelivery.net/9sCnq8t6WEGNay0RAQNdvQ/UUID-cl9jtkg6m1802uhoqwabs6gm4/public'); background-size:cover;">

                <div class="row">
                    <!-- <div class="col-md-6">
                        <img class="featured-title" src="https://c4.wallpaperflare.com/wallpaper/449/429/294/stranger-things-netflix-poster-wallpaper-preview.jpg" alt="">
                <p class="featured-desc">Lorem ipsum, dolor sit amet consectetur adipisicing elit. Iusto illo dolor
                    deserunt nam assumenda ipsa eligendi dolore</p>
                    

                    </div> -->
                    
                    <div class="col-md-12 top-div">
                        <h1 class="tagline">Unlock your Cinematic Journey,<br/> one recommendation at a time!</h1>
                        <input  type="button" class="btn btn-danger" value="Start Now">

                    </div>

                </div>
                
            </div>

            <div style="margin-left: 5%; margin-bottom: 5%;margin-top: 5%;">
                <h2 style="color:#ebe5e6; font-size: 24px; font-weight: bold;font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;">Please select movies </h2>
                <div class="row">
                    <div class="col-md-6">
                        <p>
                            &nbsp;&nbsp;<input type="text" name="search" id="searchBox" />
                        </p>
                    </div>
                    <div class="col-md-6">
                        <input style="margin-top: 3%;" type="button" class="btn btn-danger" name="predict" id="predict" value="Predict">
                    </div>

                </div>
                
        <h2 style="color:#ebe5e6; font-size: 24px; font-weight: bold;">Selected movies:</h2>
        <div class="card-container" id="selectedMovies">
            {% for movie in training_data %}
            <div class="card">
                <h4>{{ movie.title }}</h4>
                <p>Rating: {{ movie.rating }}</p>
                <p>IMDb Rating: {{ movie.imdbRating }}</p>
               
                <!-- Add more IMDb info fields as needed -->
            </div>
            {% endfor %}
        </div>
        

            </div>



            <div>
                <h2 style="color:#ebe5e6; font-size: 24px; font-weight: bold;margin-left: 5%;">HERE ARE YOUR MOVIE RECOMMENDATIONS!</h2>
            <div id="predictedMovies" class="scrolling-wrapper-flexbox">
                <!-- <div id="predictedMovies" class="card-container"></div> -->
                
            </div>
            <input style="margin-left: 5%; margin-bottom: 5%;" type="button" class="btn btn-danger" name="feedback" id="feedback" value="Give Feedback">

            </div>
            




            <!-- <div>
                <h2 style="color:#ebe5e6; font-size: 24px; font-weight: bold;">HERE ARE YOUR MOVIE RECOMMENDATIONS!</h2>
                <div class="scrolling-wrapper-flexbox">
                    <div id="predictedMovies" class="card-container"></div>
                </div>
               
                <input type="button" class="btn btn-danger" name="feedback" id="feedback" value="Give Feedback">
            </div> -->

        </div>
        
        
        <!-- <div class="row">
            
            <div class="col-md-6">
                
                
            </div>
        </div> -->
    </div>

    <div id="dataCollected" class="container" style="display: none;">
        <h1 style="color:#ebe5e6; font-size: 24px; font-weight: bold;">Thanks!! Your response was stored.</h1>
        <input type="button" id="refreshPage" class="btn btn-danger" name="refreshPage" value="Take another attempt">
    </div>
<!-- </div> -->
    <style>
        .top-div{
            text-align: center;
            padding: 10px;
        }
        .tagline{
            font-family: 'Luckiest Guy', cursive;
            font-size: 5rem;
            color: white;
            text-align: center;
        }

* {
  margin: 0;
}

body {
  font-family: "Roboto", sans-serif;
}

.navbar {
  width: 100%;
  height: 60px;
  background-color: black;
  position: sticky;
  top: 0;
  margin: 0px;
}

.navbar-container {
  display: flex;
  align-items: center;
  padding: 0 50px;
  height: 100%;
  color: white;
  font-family: "Sen", sans-serif;
}

.logo-container {
  flex: 1;
}

.logo {
  font-size: 30px;
  color: #c9302c;
  font-weight: bold;
}

.menu-container {
  flex: 5;
}

.menu-list {
  display: flex;
  list-style: none;
}

.menu-list-item {
  margin-right: 30px;
}

.menu-list-item.active {
  font-weight: bold;
}
.profile-container {
  flex: 2;
  display: flex;
  align-items: center;
  justify-content: flex-end;
} 

 .profile-text-container {
  margin: 0 20px;
}

.profile-picture {
  width: 32px;
  height: 32px;
  border-radius: 50%;
  object-fit: cover;
}

.sidebar {
  width: 50px;
  height: 100%;
  background-color: black;
  position: fixed;
  top: 0;
  display: flex;
  flex-direction: column;
  align-items: center;
  padding-top: 60px;
}

.left-menu-icon {
  color: white;
  font-size: 20px;
  margin-bottom: 40px;
}
.container {
  background-color: #151515; 
   /* width: 100%;  */
   min-height: calc(100vh - 50px);
  color: white;

}
.content-container {
  margin-left: 10px;
}
.featured-content {
  height: 50vh;
  padding: 50px;
}

.featured-title {
  width: 120px;
}

.featured-desc {
  width: 500px;
  color: lightgray;
  margin: 30px 0;
}

.featured-button {
  background-color: red;
  color: white;
  padding: 10px 20px;
  border-radius: 10px;
  border: none;
  outline: none;
  font-weight: bold;
}
.scrolling-wrapper-flexbox {
  display: flex;
  flex-wrap: nowrap;
  overflow-x: auto;
}
.card {
    flex: 0 0 auto;
  }

.error-card {
            display: none; 
            position: fixed;
            width: 350px;
            height: auto;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: #d9534f;
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            z-index: 9999; 
} 
.error-content {
            text-align: center;
        }
    


    /* .card {
    width: 100%;
    background-color: black;
    padding: 15px;
    margin-bottom: 15px;
    border-radius: 10px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    font-size: 24px;
    font-weight: bold;
    color: white;
    display: inline-block;
}  */

    /* Add some spacing between cards */
    /* .card-container .card:not(:last-child) {
        margin-bottom: 10px;
    }   */
         body {
            font-family: 'Noto Sans', sans-serif;
            background-color: #141414;
            color: white;
            padding: 0px 0px 0px 0px;
                 /*background-image: url('https://wallpaperaccess.com/full/8212583.jpg'); /* Replace 'path_to_your_image.jpg' with the actual image URL */
                
            
        }  
        /* body::after {
        content: "";
        opacity: 0.5;
        top: 0;
        left: 0;
        bottom: 0;
        right: 0;
        position: absolute;
        z-index: -1;   
        } */

        /* .navbar {
            border-radius: 0;
        } */

        /* .navbar-brand {
            font-size: 24px;
            font-weight: bold;
            color: rgb(229,9,20);
            display: inline-block;
            float: none;
            padding: 15px 0;
            margin-left: 100px;
        } */

        

        h2 {
            color: #e50914;
            font-size: 24px;
            font-weight: bold;
        }

        label {
            font-weight: bold;
            font-size: 18px;
        }

        #searchBox {
            width: 100%;
            padding: 10px;
            border: 1px solid #ccc;
            color: black;
            border-radius: 5px;
            font-size: 18px;
        }

        .card-container {
            display: flex;
            flex-direction: column;
            flex-wrap: wrap;
            justify-content: start;
        }

        .card {
            width: 10%;
            height: 10%;
            margin-bottom: 20px;
            background-color: black !important;
            padding: 5px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .card h4 {
            margin-bottom: 10px;
            font-size: 20px;
            font-weight: bold;
        }

        .btn {
            padding: 10px 20px;
            font-size: 18px;
            cursor: pointer;
        }

        .radio-buttons{
            display: flex;
            flex-direction: column;
  align-items: start;
  justify-content: center;

        }
        .checkbox-inline+.checkbox-inline, .radio-inline+.radio-inline {
    margin-top: 0;
    /* margin-left: 10px; */
}
    </style>

<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>

</body>

<script src="https://code.jquery.com/jquery-3.5.1.min.js" crossorigin="anonymous"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js" crossorigin="anonymous"></script>

<script>
    

    $(document).ready(function () {
<<<<<<< Updated upstream
        function displayErrorMessage(message) {
            $('#errorMessageText').text(message);
            $('#errorMessage').show(); // Show the error card
            $('#main').css('opacity', '0.1');
=======
      // Fetch recommended movies on page load
      $.ajax({
        url: "/api/movies",
        type: "GET",
        success: function (movies) {
          let movieCards = "";
          movies.forEach(function (movie) {
            movieCards += `
          <div class="card">
            <h4>${movie.title}</h4>
            <p>Rating: ${movie.rating}</p>
            <p>IMDb Rating: ${movie.imdbRating}</p>
          </div>
        `;
          });
          $("#predictedMovies").html(movieCards); //just now added
        },
        error: function (err) {
          console.error("Error fetching movies:", err);
        },
      });

      // Function to add selected movies
      function addSelectedMovie(movie) {
        const selectedMovieCard = `
      <div class="card">
        <h4>${movie.title}</h4>
        <p>Rating: ${movie.rating}</p>
        <p>IMDb Rating: ${movie.imdbRating}</p>
      </div>
    `;
        $("#selectedMovies").append(selectedMovieCard);
      }

      // Example of adding a movie on some action
      // addSelectedMovie({title: "Some Movie", rating: "4.5", imdbRating: "8.0"});
    });

    $(document).ready(function () {
      fetchMovieTitles(); // Initial call to fetch movie titles
    });

    $(document).ready(function () {
      // Function to create movie cards
      function createMovieCards(movies) {
        const container = $("#predictedMovies");
        container.empty(); // Clear any existing content

        // Loop through each movie and create a card
        movies.forEach((movie) => {
          const card = $('<div class="movie-card"></div>');
          card.html(`
    <a href="/movie/${movie.title}">
      <img src="${movie.poster}" alt="${movie.title} Poster" class="movie-poster" data-title="${movie.title}" />
    </a>
    <h3 class="movie-title">${movie.title}</h3>
    <p><strong>Genre:</strong> ${movie.genre}</p>
    <p><strong>Director:</strong> ${movie.director}</p>
    <p><strong>IMDb Rating:</strong> ${movie.rating}</p>
  `);

          // Append the card to the container
          container.append(card);
        });
      }

      // AJAX request to get movie data
      $.ajax({
        url: "path/to/your/movies.json", // Replace with your JSON file or API endpoint
        method: "GET",
        dataType: "json",
        success: function (data) {
          // Assuming data is an array of movie objects
          createMovieCards(data);
        },
        error: function (xhr, status, error) {
          console.error("AJAX Error:", status, error);
        },
      });
    });

    $(document).ready(function () {
      function displayErrorMessage(message) {
        $("#errorMessageText").text(message);
        $("#errorMessage").show(); // Show the error card
        $("#main").css("opacity", "0.1");
      }

      $(function () {
        $("#searchBox").autocomplete({
          source: function (request, response) {
            $.ajax({
              type: "POST",
              url: "http://localhost:5001/search",
              dataType: "json",
              cache: false,
              data: {
                q: request.term,
              },
              success: function (data) {
                //alert(data);
                // console.log(data);
                response(data);
              },
              error: function (jqXHR, textStatus, errorThrown) {
                console.log(textStatus + " " + errorThrown);
              },
            });
          },
          select: function (event, ui) {
            var ulList = $("#selectedMovies");
            var li = $("<li/>").text(ui.item.value).appendTo(ulList);
            $("#searchBox").val("");
            return false;
          },
          minLength: 2,
        });
      });
      // see this
      $("#predict").click(function () {
        var movie_list = [];

        $("#selectedMovies li").each(function () {
          movie_list.push($(this).text());
        });

        var movies = { movie_list: movie_list };

        $.ajax({
          type: "POST",
          url: "/predict",
          dataType: "json",
          contentType: "application/json;charset=UTF-8",
          traditional: "true",
          cache: false,
          data: JSON.stringify(movies),
          success: function (response) {
            var ulList = $("#selectedMovies li");
            var i = 0;
            response["recommendations"].forEach((element) => {
              var card = document.createElement("div");
              card.id = "predict_movie" + i;
              card.className = "card";
              card.style.margin = "2.5%";
              card.style.width = "20%";
              card.style.padding = "2%";

              var image = document.createElement("img");
              image.src = response["rating"][element + "-p"];
              image.alt = "Movie Poster";
              image.style.width = "100%";

              image.addEventListener("click", function () {
                window.location.href = "/movie/" + element; // Replace 'element' with the ID or name for routing to the movie detail page
              });
              card.appendChild(image);

              var cardBody = document.createElement("div");
              cardBody.className = "card-body";

              var title = document.createElement("h3");
              title.id = "title";
              title.className = "card-title";
              title.textContent = element;

              var imdbRating = document.createElement("h6");
              imdbRating.className = "card-text";
              imdbRating.textContent =
                "imdb: " + response["rating"][element + "-r"];

              var genre = document.createElement("h6");
              genre.className = "card-text";
              genre.textContent =
                "Genre: " + response["rating"][element + "-g"];

              var radioButtons = document.createElement("div");
              radioButtons.className = "radio-buttons";

              var trailer = document.createElement("a");
              trailer.className = "card-text";
              trailer.innerHTML =
                '<div width = "10px" height="10px" style="border: 1px solid #FFF; text-align: center; "><a href= ' +
                response["rating"][element + "-u"] +
                ' target= "_blank" style="color:white; font-size: 20px; text-decoration:None; "> Play Trailer </a>';
              // card.appendChild(trailer);

              // var QuestionLabel = document.createElement("label");
              // QuestionLabel.className = "radio-inline";
              // QuestionLabel.innerHTML = "<h4>Give Feedback:";

              // var dislikeLabel = document.createElement("label");
              // dislikeLabel.className = "radio-inline";
              // dislikeLabel.innerHTML =
              //   '<input type="radio" id ="dislike" name="' +
              //   element +
              //   '" value="1"> Dislike <br/>';

              // var yetToWatchLabel = document.createElement("label");
              // yetToWatchLabel.className = "radio-inline";
              // yetToWatchLabel.innerHTML =
              //   '<input  type="radio" id="towatch" name="' +
              //   element +
              //   '" value="2"> Yet to watch <br/>';

              // var likeLabel = document.createElement("label");
              // likeLabel.className = "radio-inline";
              // likeLabel.innerHTML =
              //   '<input type="radio" id="like" name="' +
              //   element +
              //   '" value="3"> Like <br/>';

              // radioButtons.appendChild(QuestionLabel);
              // radioButtons.appendChild(dislikeLabel);
              // radioButtons.appendChild(yetToWatchLabel);
              // radioButtons.appendChild(likeLabel);

              cardBody.appendChild(title);
              cardBody.appendChild(imdbRating);
              cardBody.appendChild(trailer);
              cardBody.appendChild(genre);
              // cardBody.appendChild(radioButtons);

              card.appendChild(cardBody);
              document.getElementById("selectedMovies").appendChild(card);
              i += 1;
              return card;
            });

            // var li = $('<li/>').text()
            console.log("->", response["recommendations"]);
          },
          error: function (error) {
            console.log("ERROR ->" + error);
            displayErrorMessage("Error in fetching recommendations");
          },
        });
      });

      $("#feedback").click(function () {
        var myForm = $("fieldset");
        var data = {};
        var labels = {
          1: "Dislike",
          2: "Yet to watch",
          3: "Like",
        };
        console.log("Length", myForm.length);
        for (var i = 0; i < 10; i++) {
          console.log("In for loop");
          var input = $("#predict_movie" + i)
            .find("div")
            .find("input:checked")[0].value;
          var movieName = $("#predict_movie" + i)
            .find("div")
            .find("h3")[0].innerHTML;
          //var movieName = $('#predict_movie'+i).find('div').find('li')[0].innerText;
          console.log("Print", input, movieName);
          data[movieName] = labels[input];

          var input = $("predictedMovies").find();
>>>>>>> Stashed changes
        }

        $(function () {
            $("#searchBox").autocomplete({
                source: function (request, response) {
                    $.ajax({
                        type: "POST",
                        url: "http://localhost:5001/search",
                        dataType: "json",
                        cache: false,
                        data: {
                            q: request.term
                        },
                        success: function (data) {
                            //alert(data);
                            // console.log(data);
                            response(data);
                        },
                        error: function (jqXHR, textStatus, errorThrown) {
                            console.log(textStatus + " " + errorThrown);
                        }
                    });
                },
                select: function (event, ui) {
                    var ulList = $('#selectedMovies');
                    var li = $('<li/>').text(ui.item.value).appendTo(ulList);
                    $('#searchBox').val("");
                    return false;
                },
                minLength: 2
            });
        });

        $("#predict").click( function(){
            var movie_list = []

            $('#selectedMovies li').each( function () {
                movie_list.push($(this).text());
            });

            var movies = {"movie_list": movie_list};

            $.ajax({
                type: "POST",
                url: "/predict",
                dataType: "json",
                contentType: "application/json;charset=UTF-8",
                traditional: "true",
                cache: false,
                data: JSON.stringify(movies),
                success: function (response) {
                    var ulList = $('#predictedMovies');
                    var i = 0;
                    response['recommendations'].forEach(element => {
                        // var diventry = $('<div/>');
                        // var fieldset = $('<fieldset/>', {id:i}).css("border",'0');
                        // var poster = $('<img>').attr('src', imageSrc);                        var li = $('<li/>').text(element);
                        // var imdbRating = $('<li>').text("imdb: " + response['rating'][element+"-r"]);
                        // var genre=$('<p/>').text("Genre: " + response['rating'][element+"-g"]);
                        // var radios = $("<label class='radio-inline'><input type='radio' name="+i+" value=1>Dislike</label> \
                        // <label class='radio-inline'><input type='radio' name="+i+" value=2>Yet to watch</label> \
                        // <label class='radio-inline'><input type='radio' name="+i+" value=3>Like</label><br/><br/>");
                        // diventry.append(li);
                        // diventry.append(imdbRating);
                        // diventry.append(genre);
                        // diventry.append(radios);
                        // fieldset.append(diventry);
                        // ulList.append(fieldset);
                        var card = document.createElement('div');
                        card.id = "predict_movie"+i;
                        card.className = 'card';
                        card.style.margin='2.5%'
                        card.style.width = '20%';
                        card.style.padding = '2%';

                        var image = document.createElement('img');
                        image.src = response['rating'][element+"-p"];
                        image.alt = 'Movie Poster';
                        image.style.width='100%';
                        card.appendChild(image);

                        var cardBody = document.createElement('div');
                        cardBody.className = 'card-body';

                        var title = document.createElement('h3');
                        title.id = 'title';
                        title.className = 'card-title';
                        title.textContent = element;

                        var imdbRating = document.createElement('h6');
                        imdbRating.className = 'card-text';
                        imdbRating.textContent = 'imdb: ' + response['rating'][element + "-r"];

                        var genre = document.createElement('h6');
                        genre.className = 'card-text';
                        genre.textContent = 'Genre: ' + response['rating'][element + "-g"];

                        var radioButtons = document.createElement('div');
                        radioButtons.className = 'radio-buttons';

                        var trailer = document.createElement('a');
                        trailer.className = 'card-text'
                        trailer.innerHTML = '<div width = "10px" height="10px" style="border: 1px solid #FFF; text-align: center; "><a href= '+ response['rating'][element + "-u"] +
                            ' target= "_blank" style="color:white; font-size: 20px; text-decoration:None; "> Play Trailer </a>';
                       // card.appendChild(trailer);
                       

                        var QuestionLabel = document.createElement('label');
                        QuestionLabel.className = 'radio-inline';
                        QuestionLabel.innerHTML = '<h4>Give Feedback:';

                        var dislikeLabel = document.createElement('label');
                        dislikeLabel.className = 'radio-inline';
                        dislikeLabel.innerHTML = '<input type="radio" id ="dislike" name="' + element + '" value="1"> Dislike <br/>';

                        var yetToWatchLabel = document.createElement('label');
                        yetToWatchLabel.className = 'radio-inline';
                        yetToWatchLabel.innerHTML = '<input  type="radio" id="towatch" name="' + element + '" value="2"> Yet to watch <br/>';

                        var likeLabel = document.createElement('label');
                        likeLabel.className = 'radio-inline';
                        likeLabel.innerHTML = '<input type="radio" id="like" name="' + element + '" value="3"> Like <br/>';
                        
                        radioButtons.appendChild(QuestionLabel);
                        radioButtons.appendChild(dislikeLabel);
                        radioButtons.appendChild(yetToWatchLabel);
                        radioButtons.appendChild(likeLabel);

                        cardBody.appendChild(title);
                        cardBody.appendChild(imdbRating);
                        cardBody.appendChild(trailer);
                        cardBody.appendChild(genre);
                        cardBody.appendChild(radioButtons);
                        

                        card.appendChild(cardBody);
                        document.getElementById('predictedMovies').appendChild(card);
                        i+=1;
                        return card;
                        
                    });

                    // var li = $('<li/>').text()
                    console.log("->", response['recommendations']);
                },
                error: function (error) {
                    console.log("ERROR ->" + error );
                    displayErrorMessage("Error in fetching recommendations");

                }
            });
        });

        $('#feedback').click(function(){
           
            var myForm = $('fieldset');
            var data = {};
            var labels = {
                1: 'Dislike',
                2: 'Yet to watch',
                3: 'Like'
            };
            console.log("Length",myForm.length);
            for(var i=0;i<10;i++){
                console.log('In for loop');
                var input = $('#predict_movie'+i).find('div').find('input:checked')[0].value;
                var movieName = $('#predict_movie'+i).find('div').find('h3')[0].innerHTML
                //var movieName = $('#predict_movie'+i).find('div').find('li')[0].innerText;
                console.log("Print", input, movieName);
                data[movieName]=labels[input];

                var input = $('predictedMovies').find()
                
            }
            console.log("DATA",data);

            $.ajax({
                type: "POST",
                url: "/feedback",
                dataType: "json",
                contentType: "application/json;charset=UTF-8",
                traditional: "true",
                cache: false,
                data: JSON.stringify(data),
                success: function (response) {
                    // console.log("->", response);
                    // $("#dataCollected").css("display", "block");
                    window.location.href="/success";
                },
                error: function (error) {
                    console.log("ERROR ->" + error );
                    displayErrorMessage("Please fill in all the fields");
                }
            });

        });


    });

</script>

</html>